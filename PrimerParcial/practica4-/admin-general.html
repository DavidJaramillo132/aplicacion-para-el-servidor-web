<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin General - FilaVirtual Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-brand">
            <i class="fas fa-crown"></i> Admin General
        </div>
        <ul class="sidebar-nav">
            <li><a href="#dashboard" class="active" onclick="showSection('dashboard')"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            <li><a href="#businesses" onclick="showSection('businesses')"><i class="fas fa-building"></i> Negocios</a></li>
            <li><a href="#users" onclick="showSection('users')"><i class="fas fa-users"></i> Usuarios</a></li>
            <li><a href="#appointments" onclick="showSection('appointments')"><i class="fas fa-calendar"></i> Citas</a></li>
            <li><a href="#reports" onclick="showSection('reports')"><i class="fas fa-chart-bar"></i> Reportes</a></li>
            <li><a href="#notifications" onclick="showSection('notifications')"><i class="fas fa-bell"></i> Notificaciones</a></li>
            <li><a href="#settings" onclick="showSection('settings')"><i class="fas fa-cog"></i> Configuración</a></li>
            <li><a href="index.html"><i class="fas fa-home"></i> Volver al Inicio</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="content-section">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <h1 class="dashboard-title">Dashboard General</h1>
                <div>
                    <button class="btn btn-primary" onclick="refreshData()">
                        <i class="fas fa-sync-alt"></i> Actualizar
                    </button>
                    <button class="btn btn-secondary" onclick="exportReport()">
                        <i class="fas fa-download"></i> Exportar
                    </button>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="grid-4 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">127</div>
                    <div class="stat-label">Negocios Activos</div>
                    <small><i class="fas fa-arrow-up text-success"></i> +5 esta semana</small>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">2,456</div>
                    <div class="stat-label">Usuarios Registrados</div>
                    <small><i class="fas fa-arrow-up text-success"></i> +12% este mes</small>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">5,847</div>
                    <div class="stat-label">Citas Hoy</div>
                    <small><i class="fas fa-clock"></i> En tiempo real</small>
                </div>
                <div class="stat-card danger">
                    <div class="stat-number">$15,450</div>
                    <div class="stat-label">Ingresos del Día</div>
                    <small><i class="fas fa-arrow-up text-success"></i> +8% vs ayer</small>
                </div>
            </div>

            <!-- Charts and Recent Activity -->
            <div class="grid-2 mb-3">
                <div class="card">
                    <div class="card-header">
                        <h3>Citas por Tipo de Negocio</h3>
                        <select class="form-control" style="width: auto;">
                            <option>Última semana</option>
                            <option>Último mes</option>
                            <option>Último trimestre</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="businessChart"></canvas>
                        <div style="text-align: center; color: #666;">
                            <i class="fas fa-chart-pie" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <p>Gráfico de distribución de citas por tipo de negocio</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h3>Tendencia de Usuarios</h3>
                        <select class="form-control" style="width: auto;">
                            <option>Última semana</option>
                            <option>Último mes</option>
                            <option>Último trimestre</option>
                        </select>
                    </div>
                    <div class="chart-container">
                        <canvas id="usersChart"></canvas>
                        <div style="text-align: center; color: #666;">
                            <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <p>Gráfico de crecimiento de usuarios registrados</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Alerts -->
            <div class="card">
                <div class="card-header">
                    <h3>Alertas del Sistema</h3>
                    <button class="btn btn-sm btn-secondary" onclick="markAllAsRead()">
                        <i class="fas fa-check-double"></i> Marcar como leídas
                    </button>
                </div>
                <div style="padding: 1rem;">
                    <div class="alert alert-warning" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
                        <strong><i class="fas fa-exclamation-triangle"></i> Alta carga en el servidor</strong>
                        <p>El servidor está experimentando un 85% de uso de CPU. Se recomienda monitorear.</p>
                        <small>Hace 15 minutos</small>
                    </div>
                    <div class="alert alert-info" style="background: #d1ecf1; border-left: 4px solid #17a2b8; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
                        <strong><i class="fas fa-info-circle"></i> Nuevo negocio registrado</strong>
                        <p>La "Panadería Don Juan" se registró exitosamente y está pendiente de aprobación.</p>
                        <small>Hace 1 hora</small>
                    </div>
                    <div class="alert alert-success" style="background: #d4edda; border-left: 4px solid #28a745; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
                        <strong><i class="fas fa-check-circle"></i> Respaldo completado</strong>
                        <p>El respaldo automático diario se completó exitosamente.</p>
                        <small>Hace 3 horas</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- Businesses Section -->
        <div id="businesses-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Gestión de Negocios</h1>
                <div>
                    <input type="text" placeholder="Buscar negocio..." class="form-control" style="width: 200px; margin-right: 1rem;" id="businessSearch">
                    <button class="btn btn-primary" onclick="showModal('addBusinessModal')">
                        <i class="fas fa-plus"></i> Agregar Negocio
                    </button>
                </div>
            </div>

            <div class="grid-4 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">127</div>
                    <div class="stat-label">Total Negocios</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">119</div>
                    <div class="stat-label">Activos</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">5</div>
                    <div class="stat-label">Pendientes</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-number">3</div>
                    <div class="stat-label">Suspendidos</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Lista de Negocios</h3>
                </div>
                <div class="table-container">
                    <table class="table" id="businessTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Nombre</th>
                                <th>Tipo</th>
                                <th>Admin Local</th>
                                <th>Estado</th>
                                <th>Clientes Hoy</th>
                                <th>Fecha Registro</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#001</td>
                                <td>Restaurante El Buen Sabor</td>
                                <td><span class="status-badge status-active">Restaurante</span></td>
                                <td>María González</td>
                                <td><span class="status-badge status-active">Activo</span></td>
                                <td>45</td>
                                <td>15/01/2024</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewDetails('001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" onclick="editItem('001')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" onclick="sendWarning('001')">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>#002</td>
                                <td>Hospital San Rafael</td>
                                <td><span class="status-badge status-completed">Hospital</span></td>
                                <td>Dr. Juan Pérez</td>
                                <td><span class="status-badge status-active">Activo</span></td>
                                <td>120</td>
                                <td>10/02/2024</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewDetails('002')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" onclick="editItem('002')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" onclick="sendWarning('002')">
                                        <i class="fas fa-exclamation-triangle"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>#003</td>
                                <td>Veterinaria Mundo Animal</td>
                                <td><span class="status-badge status-pending">Veterinaria</span></td>
                                <td>Ana López</td>
                                <td><span class="status-badge status-inactive">Suspendido</span></td>
                                <td>0</td>
                                <td>22/02/2024</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewDetails('003')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-success" onclick="activateBusiness('003')">
                                        <i class="fas fa-play"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" onclick="deleteItem('003')">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Users Section -->
        <div id="users-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Gestión de Usuarios</h1>
                <div>
                    <input type="text" placeholder="Buscar usuario..." class="form-control" style="width: 200px; margin-right: 1rem;" id="userSearch">
                    <button class="btn btn-primary" onclick="showModal('addUserModal')">
                        <i class="fas fa-user-plus"></i> Agregar Usuario
                    </button>
                </div>
            </div>

            <div class="grid-4 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">2,456</div>
                    <div class="stat-label">Total Usuarios</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">1,890</div>
                    <div class="stat-label">Clientes</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">127</div>
                    <div class="stat-label">Admins Locales</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-number">5</div>
                    <div class="stat-label">Admins Generales</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Lista de Usuarios</h3>
                </div>
                <div class="table-container">
                    <table class="table" id="usersTable">
                        <thead>
                            <tr>
                                <th>Usuario</th>
                                <th>Email</th>
                                <th>Tipo</th>
                                <th>Estado</th>
                                <th>Último Acceso</th>
                                <th>Fecha Registro</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="customer-info">
                                        <div class="customer-avatar">MG</div>
                                        <div>
                                            <strong>María González</strong>
                                            <small>Admin Local</small>
                                        </div>
                                    </div>
                                </td>
                                <td>maria.gonzalez@email.com</td>
                                <td><span class="status-badge status-warning">Admin Local</span></td>
                                <td><span class="status-badge status-active">Activo</span></td>
                                <td>Hace 2 horas</td>
                                <td>15/01/2024</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewUserDetails('001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" onclick="editUser('001')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" onclick="suspendUser('001')">
                                        <i class="fas fa-ban"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="customer-info">
                                        <div class="customer-avatar">AS</div>
                                        <div>
                                            <strong>Ana Silva</strong>
                                            <small>Cliente</small>
                                        </div>
                                    </div>
                                </td>
                                <td>ana.silva@email.com</td>
                                <td><span class="status-badge status-completed">Cliente</span></td>
                                <td><span class="status-badge status-active">Activo</span></td>
                                <td>Hace 30 min</td>
                                <td>20/03/2024</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewUserDetails('002')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" onclick="editUser('002')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" onclick="suspendUser('002')">
                                        <i class="fas fa-ban"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Appointments Section -->
        <div id="appointments-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Monitoreo de Citas</h1>
                <div>
                    <input type="date" class="form-control" style="width: 200px; margin-right: 1rem;" value="2024-09-30">
                    <button class="btn btn-primary" onclick="filterAppointments()">
                        <i class="fas fa-filter"></i> Filtrar
                    </button>
                </div>
            </div>

            <div class="grid-4 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">5,847</div>
                    <div class="stat-label">Citas Hoy</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">4,123</div>
                    <div class="stat-label">Completadas</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">1,234</div>
                    <div class="stat-label">En Progreso</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-number">490</div>
                    <div class="stat-label">Canceladas</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Citas del Sistema</h3>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Cliente</th>
                                <th>Negocio</th>
                                <th>Servicio</th>
                                <th>Fecha/Hora</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>#A001</td>
                                <td>María Rodríguez</td>
                                <td>Restaurante El Buen Sabor</td>
                                <td>Mesa para 4</td>
                                <td>Hoy 19:30</td>
                                <td><span class="status-badge status-active">En progreso</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewAppointmentDetails('A001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>#A002</td>
                                <td>Juan García</td>
                                <td>Hospital San Rafael</td>
                                <td>Consulta General</td>
                                <td>Hoy 14:00</td>
                                <td><span class="status-badge status-completed">Completado</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewAppointmentDetails('A002')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Reports Section -->
        <div id="reports-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Reportes del Sistema</h1>
                <div>
                    <select class="form-control" style="width: 200px; margin-right: 1rem;">
                        <option>Último mes</option>
                        <option>Último trimestre</option>
                        <option>Último año</option>
                    </select>
                    <button class="btn btn-primary" onclick="generateSystemReport()">
                        <i class="fas fa-chart-bar"></i> Generar
                    </button>
                </div>
            </div>

            <div class="grid-4 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">$125,450</div>
                    <div class="stat-label">Ingresos Totales</div>
                    <small><i class="fas fa-arrow-up"></i> +22% vs mes anterior</small>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">45,678</div>
                    <div class="stat-label">Citas Completadas</div>
                    <small><i class="fas fa-arrow-up"></i> +15% vs mes anterior</small>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">4.7</div>
                    <div class="stat-label">Calificación Promedio</div>
                    <small><i class="fas fa-star"></i> De 5 estrellas</small>
                </div>
                <div class="stat-card danger">
                    <div class="stat-number">15</div>
                    <div class="stat-label">Tiempo Prom. Espera</div>
                    <small><i class="fas fa-clock"></i> Minutos</small>
                </div>
            </div>

            <div class="grid-2 mb-3">
                <div class="card">
                    <div class="card-header">
                        <h3>Ingresos por Tipo de Negocio</h3>
                    </div>
                    <div class="chart-container">
                        <div style="text-align: center; color: #666;">
                            <i class="fas fa-chart-pie" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <p>Distribución de ingresos por categoría</p>
                            <div style="text-align: left; margin-top: 1rem;">
                                <div><span style="color: #667eea;">●</span> Restaurantes: 35% ($43,907)</div>
                                <div><span style="color: #28a745;">●</span> Hospitales: 30% ($37,635)</div>
                                <div><span style="color: #ffc107;">●</span> Salones: 20% ($25,090)</div>
                                <div><span style="color: #dc3545;">●</span> Otros: 15% ($18,818)</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Crecimiento de Usuarios</h3>
                    </div>
                    <div class="chart-container">
                        <div style="text-align: center; color: #666;">
                            <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <p>Nuevos registros por mes</p>
                            <div style="text-align: left; margin-top: 1rem;">
                                <div>Enero: 234 usuarios</div>
                                <div>Febrero: 289 usuarios</div>
                                <div>Marzo: 367 usuarios</div>
                                <div>Abril: 456 usuarios</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Rendimiento por Negocio</h3>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Negocio</th>
                                <th>Citas Completadas</th>
                                <th>Calificación</th>
                                <th>Ingresos</th>
                                <th>Crecimiento</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Restaurante El Buen Sabor</td>
                                <td>1,234</td>
                                <td>4.6 ⭐</td>
                                <td>$12,450</td>
                                <td><span style="color: green;">+18%</span></td>
                            </tr>
                            <tr>
                                <td>Hospital San Rafael</td>
                                <td>2,456</td>
                                <td>4.8 ⭐</td>
                                <td>$24,680</td>
                                <td><span style="color: green;">+12%</span></td>
                            </tr>
                            <tr>
                                <td>Veterinaria Mundo Animal</td>
                                <td>890</td>
                                <td>4.5 ⭐</td>
                                <td>$8,900</td>
                                <td><span style="color: red;">-5%</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Notifications Section -->
        <div id="notifications-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Centro de Notificaciones</h1>
                <div>
                    <button class="btn btn-primary" onclick="showModal('sendNotificationModal')">
                        <i class="fas fa-paper-plane"></i> Enviar Notificación
                    </button>
                </div>
            </div>

            <div class="grid-3 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">45</div>
                    <div class="stat-label">No Leídas</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">234</div>
                    <div class="stat-label">Enviadas Hoy</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Programadas</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Notificaciones Recientes</h3>
                    <button class="btn btn-sm btn-secondary" onclick="markAllNotificationsAsRead()">
                        <i class="fas fa-check-double"></i> Marcar todas como leídas
                    </button>
                </div>
                <div style="padding: 1rem;">
                    <div class="alert alert-warning" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
                        <div class="d-flex justify-content-between">
                            <div>
                                <strong><i class="fas fa-exclamation-triangle"></i> Sistema de Pagos</strong>
                                <p>Se detectó un fallo en el procesamiento de pagos. 12 transacciones afectadas.</p>
                                <small>Hace 30 minutos</small>
                            </div>
                            <button class="btn btn-sm btn-primary">Revisar</button>
                        </div>
                    </div>
                    <div class="alert alert-info" style="background: #d1ecf1; border-left: 4px solid #17a2b8; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
                        <div class="d-flex justify-content-between">
                            <div>
                                <strong><i class="fas fa-info-circle"></i> Mantenimiento Programado</strong>
                                <p>Mantenimiento del servidor programado para mañana a las 2:00 AM.</p>
                                <small>Hace 2 horas</small>
                            </div>
                            <button class="btn btn-sm btn-primary">Ver Detalles</button>
                        </div>
                    </div>
                    <div class="alert alert-success" style="background: #d4edda; border-left: 4px solid #28a745; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
                        <div class="d-flex justify-content-between">
                            <div>
                                <strong><i class="fas fa-check-circle"></i> Backup Completado</strong>
                                <p>Respaldo automático de la base de datos completado exitosamente.</p>
                                <small>Hace 4 horas</small>
                            </div>
                            <button class="btn btn-sm btn-success">Verificar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settings-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Configuración del Sistema</h1>
                <div>
                    <button class="btn btn-success" onclick="saveSystemSettings()">
                        <i class="fas fa-save"></i> Guardar Configuración
                    </button>
                </div>
            </div>

            <div class="grid-2">
                <!-- System Configuration -->
                <div class="card">
                    <div class="card-header">
                        <h3>Configuración General</h3>
                    </div>
                    <div style="padding: 1.5rem;">
                        <div class="form-group">
                            <label>Nombre del Sistema:</label>
                            <input type="text" class="form-control" value="FilaVirtual">
                        </div>
                        <div class="form-group">
                            <label>URL del Sistema:</label>
                            <input type="url" class="form-control" value="https://filavirtual.com">
                        </div>
                        <div class="form-group">
                            <label>Email de Administrador:</label>
                            <input type="email" class="form-control" value="admin@filavirtual.com">
                        </div>
                        <div class="form-group">
                            <label>Zona Horaria:</label>
                            <select class="form-control">
                                <option>America/Guayaquil (UTC-5)</option>
                                <option>America/New_York (UTC-5)</option>
                                <option>Europe/Madrid (UTC+1)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="maintenanceMode"> 
                            <label for="maintenanceMode">Modo de mantenimiento</label>
                        </div>
                    </div>
                </div>

                <!-- Security Settings -->
                <div class="card">
                    <div class="card-header">
                        <h3>Configuración de Seguridad</h3>
                    </div>
                    <div style="padding: 1.5rem;">
                        <div class="form-group">
                            <label>Intentos de login fallidos permitidos:</label>
                            <input type="number" class="form-control" value="3">
                        </div>
                        <div class="form-group">
                            <label>Tiempo de bloqueo (minutos):</label>
                            <input type="number" class="form-control" value="15">
                        </div>
                        <div class="form-group">
                            <label>Duración de sesión (horas):</label>
                            <input type="number" class="form-control" value="8">
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="twoFactorAuth" checked> 
                            <label for="twoFactorAuth">Autenticación de dos factores obligatoria</label>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="emailVerification" checked> 
                            <label for="emailVerification">Verificación de email requerida</label>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="passwordComplexity" checked> 
                            <label for="passwordComplexity">Contraseñas complejas obligatorias</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid-2 mt-3">
                <!-- Notification Settings -->
                <div class="card">
                    <div class="card-header">
                        <h3>Configuración de Notificaciones</h3>
                    </div>
                    <div style="padding: 1.5rem;">
                        <div class="form-group">
                            <input type="checkbox" id="systemAlerts" checked> 
                            <label for="systemAlerts">Alertas del sistema</label>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="userRegistrations" checked> 
                            <label for="userRegistrations">Nuevos registros de usuarios</label>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="businessRegistrations" checked> 
                            <label for="businessRegistrations">Nuevos registros de negocios</label>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="errorNotifications" checked> 
                            <label for="errorNotifications">Notificaciones de errores</label>
                        </div>
                        <div class="form-group">
                            <label>Email para notificaciones críticas:</label>
                            <input type="email" class="form-control" value="alerts@filavirtual.com">
                        </div>
                    </div>
                </div>

                <!-- Backup Settings -->
                <div class="card">
                    <div class="card-header">
                        <h3>Configuración de Respaldos</h3>
                    </div>
                    <div style="padding: 1.5rem;">
                        <div class="form-group">
                            <input type="checkbox" id="autoBackup" checked> 
                            <label for="autoBackup">Respaldos automáticos</label>
                        </div>
                        <div class="form-group">
                            <label>Frecuencia de respaldo:</label>
                            <select class="form-control">
                                <option>Diario</option>
                                <option>Semanal</option>
                                <option>Mensual</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Hora de respaldo:</label>
                            <input type="time" class="form-control" value="02:00">
                        </div>
                        <div class="form-group">
                            <label>Retención de respaldos (días):</label>
                            <input type="number" class="form-control" value="30">
                        </div>
                        <div class="form-group">
                            <button class="btn btn-primary" onclick="createManualBackup()">
                                <i class="fas fa-database"></i> Crear Respaldo Manual
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <h1 class="dashboard-title">Dashboard General</h1>
            <div>
                <button class="btn btn-primary" onclick="refreshData()">
                    <i class="fas fa-sync-alt"></i> Actualizar
                </button>
                <button class="btn btn-secondary" onclick="exportReport()">
                    <i class="fas fa-download"></i> Exportar
                </button>
            </div>
        </div>

        <!-- Stats Cards -->
        <div class="grid-4 mb-3">
            <div class="stat-card primary">
                <div class="stat-number">127</div>
                <div class="stat-label">Negocios Activos</div>
                <small><i class="fas fa-arrow-up text-success"></i> +5 esta semana</small>
            </div>
            <div class="stat-card success">
                <div class="stat-number">2,456</div>
                <div class="stat-label">Usuarios Registrados</div>
                <small><i class="fas fa-arrow-up text-success"></i> +12% este mes</small>
            </div>
            <div class="stat-card warning">
                <div class="stat-number">5,847</div>
                <div class="stat-label">Citas Hoy</div>
                <small><i class="fas fa-clock"></i> En tiempo real</small>
            </div>
            <div class="stat-card danger">
                <div class="stat-number">$15,450</div>
                <div class="stat-label">Ingresos del Día</div>
                <small><i class="fas fa-arrow-up text-success"></i> +8% vs ayer</small>
            </div>
        </div>

        <!-- Charts and Recent Activity -->
        <div class="grid-2 mb-3">
            <div class="card">
                <div class="card-header">
                    <h3>Citas por Tipo de Negocio</h3>
                    <select class="form-control" style="width: auto;">
                        <option>Última semana</option>
                        <option>Último mes</option>
                        <option>Último trimestre</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="businessChart"></canvas>
                    <div style="text-align: center; color: #666;">
                        <i class="fas fa-chart-pie" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <p>Gráfico de distribución de citas por tipo de negocio</p>
                    </div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3>Tendencia de Usuarios</h3>
                    <select class="form-control" style="width: auto;">
                        <option>Última semana</option>
                        <option>Último mes</option>
                        <option>Último trimestre</option>
                    </select>
                </div>
                <div class="chart-container">
                    <canvas id="usersChart"></canvas>
                    <div style="text-align: center; color: #666;">
                        <i class="fas fa-chart-line" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <p>Gráfico de crecimiento de usuarios registrados</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Businesses -->
        <div class="card mb-3">
            <div class="card-header">
                <h3>Negocios Recientes</h3>
                <div>
                    <input type="text" placeholder="Buscar negocio..." class="form-control" style="width: 200px; margin-right: 1rem;" id="businessSearch">
                    <button class="btn btn-primary" onclick="showModal('addBusinessModal')">
                        <i class="fas fa-plus"></i> Agregar Negocio
                    </button>
                </div>
            </div>
            <div class="table-container">
                <table class="table" id="businessTable">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nombre</th>
                            <th>Tipo</th>
                            <th>Admin Local</th>
                            <th>Estado</th>
                            <th>Clientes Hoy</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>#001</td>
                            <td>Restaurante El Buen Sabor</td>
                            <td><span class="status-badge status-active">Restaurante</span></td>
                            <td>María González</td>
                            <td><span class="status-badge status-active">Activo</span></td>
                            <td>45</td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="viewDetails('001')">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-warning" onclick="editItem('001')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="sendWarning('001')">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>#002</td>
                            <td>Hospital San Rafael</td>
                            <td><span class="status-badge status-completed">Hospital</span></td>
                            <td>Dr. Juan Pérez</td>
                            <td><span class="status-badge status-active">Activo</span></td>
                            <td>120</td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="viewDetails('002')">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-warning" onclick="editItem('002')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="sendWarning('002')">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>#003</td>
                            <td>Veterinaria Mundo Animal</td>
                            <td><span class="status-badge status-pending">Veterinaria</span></td>
                            <td>Ana López</td>
                            <td><span class="status-badge status-inactive">Suspendido</span></td>
                            <td>0</td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="viewDetails('003')">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-success" onclick="activateBusiness('003')">
                                    <i class="fas fa-play"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="deleteItem('003')">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>#004</td>
                            <td>Salón Elegancia</td>
                            <td><span class="status-badge status-warning">Salón</span></td>
                            <td>Carmen Silva</td>
                            <td><span class="status-badge status-active">Activo</span></td>
                            <td>18</td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="viewDetails('004')">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-warning" onclick="editItem('004')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="sendWarning('004')">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>#005</td>
                            <td>Banco Nacional</td>
                            <td><span class="status-badge status-active">Banco</span></td>
                            <td>Roberto Vargas</td>
                            <td><span class="status-badge status-active">Activo</span></td>
                            <td>89</td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="viewDetails('005')">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-warning" onclick="editItem('005')">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-danger" onclick="sendWarning('005')">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- System Alerts -->
        <div class="card">
            <div class="card-header">
                <h3>Alertas del Sistema</h3>
                <button class="btn btn-sm btn-secondary" onclick="markAllAsRead()">
                    <i class="fas fa-check-double"></i> Marcar como leídas
                </button>
            </div>
            <div style="padding: 1rem;">
                <div class="alert alert-warning" style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
                    <strong><i class="fas fa-exclamation-triangle"></i> Alta carga en el servidor</strong>
                    <p>El servidor está experimentando un 85% de uso de CPU. Se recomienda monitorear.</p>
                    <small>Hace 15 minutos</small>
                </div>
                <div class="alert alert-info" style="background: #d1ecf1; border-left: 4px solid #17a2b8; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
                    <strong><i class="fas fa-info-circle"></i> Nuevo negocio registrado</strong>
                    <p>La "Panadería Don Juan" se registró exitosamente y está pendiente de aprobación.</p>
                    <small>Hace 1 hora</small>
                </div>
                <div class="alert alert-success" style="background: #d4edda; border-left: 4px solid #28a745; padding: 1rem; margin-bottom: 1rem; border-radius: 5px;">
                    <strong><i class="fas fa-check-circle"></i> Respaldo completado</strong>
                    <p>El respaldo automático diario se completó exitosamente.</p>
                    <small>Hace 3 horas</small>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Add Business Modal -->
    <div id="addBusinessModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addBusinessModal')">&times;</span>
            <h2>Agregar Nuevo Negocio</h2>
            <form style="margin-top: 2rem;" onsubmit="addBusiness(event)">
                <div class="form-group">
                    <label for="businessName">Nombre del Negocio:</label>
                    <input type="text" id="businessName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="businessType">Tipo de Negocio:</label>
                    <select id="businessType" class="form-control" required>
                        <option value="">Seleccionar tipo</option>
                        <option value="restaurant">Restaurante</option>
                        <option value="hospital">Hospital</option>
                        <option value="veterinary">Veterinaria</option>
                        <option value="salon">Salón de Belleza</option>
                        <option value="bank">Banco</option>
                        <option value="government">Oficina Gubernamental</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="adminEmail">Email del Admin Local:</label>
                    <input type="email" id="adminEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="businessAddress">Dirección:</label>
                    <input type="text" id="businessAddress" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="businessPhone">Teléfono:</label>
                    <input type="tel" id="businessPhone" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">Crear Negocio</button>
            </form>
        </div>
    </div>

    <!-- Warning Modal -->
    <div id="warningModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('warningModal')">&times;</span>
            <h2>Enviar Advertencia</h2>
            <form style="margin-top: 2rem;" onsubmit="sendWarningForm(event)">
                <div class="form-group">
                    <label for="warningType">Tipo de Advertencia:</label>
                    <select id="warningType" class="form-control" required>
                        <option value="quality">Calidad del servicio</option>
                        <option value="policy">Violación de políticas</option>
                        <option value="technical">Problemas técnicos</option>
                        <option value="financial">Problemas financieros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="warningMessage">Mensaje:</label>
                    <textarea id="warningMessage" class="form-control" rows="4" required placeholder="Describe el motivo de la advertencia..."></textarea>
                </div>
                <div class="form-group">
                    <label for="warningAction">Acción requerida:</label>
                    <select id="warningAction" class="form-control" required>
                        <option value="correction">Corrección inmediata</option>
                        <option value="suspension">Suspensión temporal</option>
                        <option value="review">Revisión en 7 días</option>
                        <option value="termination">Terminación de contrato</option>
                    </select>
                </div>
                <div class="d-flex" style="gap: 1rem;">
                    <button type="submit" class="btn btn-warning w-100">Enviar Advertencia</button>
                    <button type="button" class="btn btn-secondary w-100" onclick="closeModal('warningModal')">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/script.js"></script>
    <script>
        // Admin General specific functions
        function addBusiness(event) {
            event.preventDefault();
            showNotification('Negocio agregado exitosamente', 'success');
            closeModal('addBusinessModal');
        }

        function sendWarning(businessId) {
            showModal('warningModal');
        }

        function sendWarningForm(event) {
            event.preventDefault();
            showNotification('Advertencia enviada exitosamente', 'warning');
            closeModal('warningModal');
        }

        function activateBusiness(businessId) {
            if(confirm('¿Activar este negocio?')) {
                showNotification('Negocio activado exitosamente', 'success');
            }
        }

        function markAllAsRead() {
            showNotification('Todas las alertas marcadas como leídas', 'info');
        }

        // Initialize search functionality
        document.addEventListener('DOMContentLoaded', function() {
            searchTable('businessSearch', 'businessTable');
        });

        // Simulate real-time updates
        setInterval(() => {
            const stats = document.querySelectorAll('.stat-number');
            stats.forEach(stat => {
                const currentValue = parseInt(stat.textContent.replace(/[^\d]/g, ''));
                const newValue = currentValue + Math.floor(Math.random() * 3);
                if (stat.textContent.includes('$')) {
                    stat.textContent = '$' + newValue.toLocaleString();
                } else {
                    stat.textContent = newValue.toLocaleString();
                }
            });
        }, 30000); // Update every 30 seconds

        // Section switching functionality
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.style.display = 'none';
            });

            // Show the selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.style.display = 'block';
            }

            // Update navigation active state
            const navItems = document.querySelectorAll('.sidebar-nav a');
            navItems.forEach(item => {
                item.classList.remove('active');
            });

            // Add active class to clicked item
            const activeItem = document.querySelector(`[onclick="showSection('${sectionName}')"]`);
            if (activeItem) {
                activeItem.classList.add('active');
            }
        }

        // System administration functions
        function refreshData() {
            showNotification('Datos actualizados correctamente', 'success');
        }

        function exportReport() {
            showNotification('Iniciando descarga del reporte...', 'info');
        }

        function markAllAsRead() {
            showNotification('Todas las alertas marcadas como leídas', 'success');
        }

        function viewDetails(id) {
            showNotification(`Mostrando detalles del elemento ${id}`, 'info');
        }

        function editItem(id) {
            showNotification(`Editando elemento ${id}`, 'info');
        }

        function sendWarning(id) {
            if (confirm('¿Está seguro de enviar una advertencia a este negocio?')) {
                showNotification(`Advertencia enviada al negocio ${id}`, 'warning');
            }
        }

        function activateBusiness(id) {
            if (confirm('¿Activar este negocio?')) {
                showNotification(`Negocio ${id} activado correctamente`, 'success');
            }
        }

        function deleteItem(id) {
            if (confirm('¿Está seguro de eliminar este elemento? Esta acción no se puede deshacer.')) {
                showNotification(`Elemento ${id} eliminado`, 'danger');
            }
        }

        function viewUserDetails(id) {
            showNotification(`Mostrando perfil del usuario ${id}`, 'info');
        }

        function editUser(id) {
            showNotification(`Editando usuario ${id}`, 'info');
        }

        function suspendUser(id) {
            if (confirm('¿Suspender este usuario?')) {
                showNotification(`Usuario ${id} suspendido`, 'warning');
            }
        }

        function filterAppointments() {
            showNotification('Filtrando citas...', 'info');
        }

        function viewAppointmentDetails(id) {
            showNotification(`Mostrando detalles de la cita ${id}`, 'info');
        }

        function generateSystemReport() {
            showNotification('Generando reporte del sistema...', 'info');
        }

        function markAllNotificationsAsRead() {
            showNotification('Todas las notificaciones marcadas como leídas', 'success');
        }

        function saveSystemSettings() {
            showNotification('Configuración guardada exitosamente', 'success');
        }

        function createManualBackup() {
            if (confirm('¿Crear respaldo manual? Esto puede tomar varios minutos.')) {
                showNotification('Iniciando respaldo manual...', 'info');
            }
        }

        // Search functionality
        document.addEventListener('DOMContentLoaded', function() {
            const businessSearch = document.getElementById('businessSearch');
            if (businessSearch) {
                businessSearch.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase();
                    const rows = document.querySelectorAll('#businessTable tbody tr');
                    rows.forEach(row => {
                        const text = row.textContent.toLowerCase();
                        row.style.display = text.includes(searchTerm) ? '' : 'none';
                    });
                });
            }

            const userSearch = document.getElementById('userSearch');
            if (userSearch) {
                userSearch.addEventListener('input', function(e) {
                    const searchTerm = e.target.value.toLowerCase();
                    const rows = document.querySelectorAll('#usersTable tbody tr');
                    rows.forEach(row => {
                        const text = row.textContent.toLowerCase();
                        row.style.display = text.includes(searchTerm) ? '' : 'none';
                    });
                });
            }
        });
    </script>
</body>
</html>