<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Local - FilaVirtual Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-brand">
            <i class="fas fa-store"></i> Restaurante El Buen Sabor
        </div>
        <ul class="sidebar-nav">
            <li><a href="#dashboard" class="active" onclick="showSection('dashboard')"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
            <li><a href="#queue" onclick="showSection('queue')"><i class="fas fa-users"></i> Fila Virtual</a></li>
            <li><a href="#appointments" onclick="showSection('appointments')"><i class="fas fa-calendar"></i> Citas</a></li>
            <li><a href="#services" onclick="showSection('services')"><i class="fas fa-concierge-bell"></i> Servicios</a></li>
            <li><a href="#customers" onclick="showSection('customers')"><i class="fas fa-user-friends"></i> Clientes</a></li>
            <li><a href="#reports" onclick="showSection('reports')"><i class="fas fa-chart-line"></i> Reportes</a></li>
            <li><a href="#settings" onclick="showSection('settings')"><i class="fas fa-cog"></i> Configuración</a></li>
            <li><a href="index.html"><i class="fas fa-home"></i> Volver al Inicio</a></li>
        </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Dashboard Section -->
        <div id="dashboard-section" class="content-section">
            <!-- Dashboard Header -->
            <div class="dashboard-header">
                <h1 class="dashboard-title">Dashboard - Restaurante El Buen Sabor</h1>
                <div>
                    <button class="btn btn-success" onclick="callNext()">
                        <i class="fas fa-phone"></i> Llamar Siguiente
                    </button>
                    <button class="btn btn-primary" onclick="refreshData()">
                        <i class="fas fa-sync-alt"></i> Actualizar
                    </button>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="grid-4 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">8</div>
                    <div class="stat-label">En Fila Virtual</div>
                    <small><i class="fas fa-clock"></i> Tiempo prom: 18 min</small>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">45</div>
                    <div class="stat-label">Clientes Hoy</div>
                    <small><i class="fas fa-arrow-up"></i> +12% vs ayer</small>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">3</div>
                    <div class="stat-label">Siendo Atendidos</div>
                    <small><i class="fas fa-utensils"></i> 3 mesas ocupadas</small>
                </div>
                <div class="stat-card danger">
                    <div class="stat-number">$890</div>
                    <div class="stat-label">Ventas del Día</div>
                    <small><i class="fas fa-dollar-sign"></i> Meta: $1,200</small>
                </div>
            </div>

            <!-- Current Queue and Quick Actions -->
            <div class="grid-2 mb-3">
                <!-- Virtual Queue -->
                <div class="card">
                    <div class="card-header">
                        <h3>Fila Virtual Actual</h3>
                        <div>
                            <span class="status-badge status-active">En línea</span>
                            <button class="btn btn-sm btn-primary" onclick="showModal('addCustomerModal')">
                                <i class="fas fa-plus"></i> Agregar Cliente
                            </button>
                        </div>
                    </div>
                    <div class="queue-interface" style="max-height: 400px; overflow-y: auto;">
                        <div class="queue-item active">
                            <div class="customer-info">
                                <div class="customer-avatar">MR</div>
                                <div>
                                    <strong>María Rodríguez</strong>
                                    <div style="font-size: 0.9em; color: #666;">Mesa para 4 - 19:30</div>
                                    <div style="font-size: 0.8em; color: #007bff;">Tel: +593 99 123 4567</div>
                                </div>
                            </div>
                            <div>
                                <span class="status-badge status-active">Siendo atendido</span>
                                <button class="btn btn-sm btn-success mt-1" onclick="completeService('001')">
                                    <i class="fas fa-check"></i> Completar
                                </button>
                            </div>
                        </div>
                        <div class="queue-item waiting">
                            <div class="customer-info">
                                <div class="customer-avatar">JG</div>
                                <div>
                                    <strong>Juan García</strong>
                                    <div style="font-size: 0.9em; color: #666;">Mesa para 2 - 20:00</div>
                                    <div style="font-size: 0.8em; color: #007bff;">Tel: +593 99 234 5678</div>
                                </div>
                            </div>
                            <div>
                                <span class="status-badge status-pending">En espera (8 min)</span>
                                <button class="btn btn-sm btn-primary mt-1" onclick="callCustomer('002')">
                                    <i class="fas fa-phone"></i> Llamar
                                </button>
                            </div>
                        </div>
                        <div class="queue-item waiting">
                            <div class="customer-info">
                                <div class="customer-avatar">AS</div>
                                <div>
                                    <strong>Ana Silva</strong>
                                    <div style="font-size: 0.9em; color: #666;">Mesa para 6 - 20:15</div>
                                    <div style="font-size: 0.8em; color: #007bff;">Tel: +593 99 345 6789</div>
                                </div>
                            </div>
                            <div>
                                <span class="status-badge status-pending">En espera (23 min)</span>
                                <button class="btn btn-sm btn-primary mt-1" onclick="callCustomer('003')">
                                    <i class="fas fa-phone"></i> Llamar
                                </button>
                            </div>
                        </div>
                        <div class="queue-item">
                            <div class="customer-info">
                                <div class="customer-avatar">CL</div>
                                <div>
                                    <strong>Carlos López</strong>
                                    <div style="font-size: 0.9em; color: #666;">Mesa para 3 - 20:30</div>
                                    <div style="font-size: 0.8em; color: #007bff;">Tel: +593 99 456 7890</div>
                                </div>
                            </div>
                            <div>
                                <span class="status-badge status-completed">Posición #4</span>
                                <button class="btn btn-sm btn-warning mt-1" onclick="cancelAppointment('004')">
                                    <i class="fas fa-times"></i> Cancelar
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions & Info -->
                <div>
                    <!-- Business Status -->
                    <div class="card mb-2">
                        <div class="card-header">
                            <h3>Estado del Negocio</h3>
                            <button class="btn btn-sm btn-secondary" onclick="toggleBusinessStatus()">
                                <i class="fas fa-power-off"></i> <span id="statusToggle">Cerrar</span>
                            </button>
                        </div>
                        <div style="padding: 1rem;">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Estado:</span>
                                <span class="status-badge status-active" id="businessStatus">Abierto</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Horario:</span>
                                <span>11:00 AM - 10:00 PM</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Capacidad:</span>
                                <span>12 mesas (75% ocupadas)</span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Personal activo:</span>
                                <span>8 empleados</span>
                            </div>
                        </div>
                    </div>

                    <!-- Services Summary -->
                    <div class="card">
                        <div class="card-header">
                            <h3>Servicios Populares Hoy</h3>
                            <button class="btn btn-sm btn-primary" onclick="showModal('manageServicesModal')">
                                <i class="fas fa-cog"></i> Gestionar
                            </button>
                        </div>
                        <div style="padding: 1rem;">
                            <div class="d-flex justify-content-between mb-2">
                                <span>Mesa para 4</span>
                                <span><strong>18 reservas</strong></span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Mesa para 2</span>
                                <span><strong>15 reservas</strong></span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Para llevar</span>
                                <span><strong>12 pedidos</strong></span>
                            </div>
                            <div class="d-flex justify-content-between">
                                <span>Eventos</span>
                                <span><strong>2 eventos</strong></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Performance Chart -->
            <div class="card">
                <div class="card-header">
                    <h3>Rendimiento Semanal</h3>
                    <select class="form-control" style="width: auto;">
                        <option>Esta semana</option>
                        <option>Semana pasada</option>
                        <option>Últimas 4 semanas</option>
                    </select>
                </div>
                <div class="chart-container">
                    <div style="text-align: center; color: #666;">
                        <i class="fas fa-chart-bar" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                        <p>Gráfico de rendimiento semanal</p>
                        <p><small>Mostrando: Clientes atendidos, Tiempo promedio de espera, Satisfacción</small></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Queue Section -->
        <div id="queue-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Gestión de Fila Virtual</h1>
                <div>
                    <button class="btn btn-success" onclick="callNext()">
                        <i class="fas fa-phone"></i> Llamar Siguiente
                    </button>
                    <button class="btn btn-primary" onclick="showModal('addCustomerModal')">
                        <i class="fas fa-plus"></i> Agregar Cliente
                    </button>
                </div>
            </div>

            <div class="grid-3 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">8</div>
                    <div class="stat-label">En Fila Actual</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">18</div>
                    <div class="stat-label">Tiempo Promedio (min)</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">45</div>
                    <div class="stat-label">Atendidos Hoy</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Fila Virtual Completa</h3>
                    <div>
                        <button class="btn btn-primary" onclick="refreshQueue()">
                            <i class="fas fa-sync-alt"></i> Actualizar
                        </button>
                    </div>
                </div>
                <div class="queue-interface">
                    <!-- Queue items would be rendered here -->
                    <div class="queue-item active">
                        <div class="customer-info">
                            <div class="customer-avatar">MR</div>
                            <div>
                                <strong>María Rodríguez</strong>
                                <div style="font-size: 0.9em; color: #666;">Mesa para 4 - 19:30</div>
                                <div style="font-size: 0.8em; color: #007bff;">Llegó: 19:25 | Tiempo espera: 5 min</div>
                            </div>
                        </div>
                        <div>
                            <span class="status-badge status-active">Siendo atendido</span>
                            <div class="mt-1">
                                <button class="btn btn-sm btn-success" onclick="completeService('001')">Completar</button>
                                <button class="btn btn-sm btn-warning" onclick="pauseService('001')">Pausar</button>
                            </div>
                        </div>
                    </div>
                    <!-- More queue items... -->
                </div>
            </div>
        </div>

        <!-- Appointments Section -->
        <div id="appointments-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Gestión de Citas</h1>
                <div>
                    <input type="date" class="form-control" style="width: 200px; margin-right: 1rem;" id="dateFilter" value="2024-09-30">
                    <button class="btn btn-primary" onclick="filterByDate()">
                        <i class="fas fa-filter"></i> Filtrar
                    </button>
                </div>
            </div>

            <div class="grid-4 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">12</div>
                    <div class="stat-label">Citas Hoy</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">8</div>
                    <div class="stat-label">Completadas</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">3</div>
                    <div class="stat-label">En Progreso</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-number">1</div>
                    <div class="stat-label">Canceladas</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Citas de Hoy</h3>
                    <button class="btn btn-primary" onclick="showModal('addAppointmentModal')">
                        <i class="fas fa-plus"></i> Nueva Cita
                    </button>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Hora</th>
                                <th>Cliente</th>
                                <th>Servicio</th>
                                <th>Teléfono</th>
                                <th>Estado</th>
                                <th>Notas</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>19:30</td>
                                <td>María Rodríguez</td>
                                <td>Mesa para 4</td>
                                <td>+593 99 123 4567</td>
                                <td><span class="status-badge status-active">En progreso</span></td>
                                <td>Cumpleaños</td>
                                <td>
                                    <button class="btn btn-sm btn-success" onclick="completeService('001')">
                                        <i class="fas fa-check"></i>
                                    </button>
                                    <button class="btn btn-sm btn-primary" onclick="viewCustomer('001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>20:00</td>
                                <td>Juan García</td>
                                <td>Mesa para 2</td>
                                <td>+593 99 234 5678</td>
                                <td><span class="status-badge status-pending">Esperando</span></td>
                                <td>Sin gluten</td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="startService('002')">
                                        <i class="fas fa-play"></i>
                                    </button>
                                    <button class="btn btn-sm btn-warning" onclick="postponeService('002')">
                                        <i class="fas fa-clock"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Services Section -->
        <div id="services-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Gestión de Servicios</h1>
                <div>
                    <button class="btn btn-primary" onclick="showModal('addServiceModal')">
                        <i class="fas fa-plus"></i> Agregar Servicio
                    </button>
                </div>
            </div>

            <div class="grid-3 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">8</div>
                    <div class="stat-label">Servicios Activos</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">$45</div>
                    <div class="stat-label">Precio Promedio</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">90</div>
                    <div class="stat-label">Duración Prom. (min)</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Lista de Servicios</h3>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Servicio</th>
                                <th>Descripción</th>
                                <th>Precio</th>
                                <th>Duración</th>
                                <th>Capacidad</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Mesa para 2</strong></td>
                                <td>Mesa romántica para pareja</td>
                                <td>$25.00</td>
                                <td>90 min</td>
                                <td>4 mesas</td>
                                <td><span class="status-badge status-active">Activo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-warning" onclick="editService('001')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" onclick="toggleService('001')">
                                        <i class="fas fa-toggle-off"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Mesa para 4</strong></td>
                                <td>Mesa familiar o grupos pequeños</td>
                                <td>$45.00</td>
                                <td>120 min</td>
                                <td>6 mesas</td>
                                <td><span class="status-badge status-active">Activo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-warning" onclick="editService('002')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" onclick="toggleService('002')">
                                        <i class="fas fa-toggle-off"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Mesa para 6</strong></td>
                                <td>Mesa para grupos grandes</td>
                                <td>$65.00</td>
                                <td>150 min</td>
                                <td>2 mesas</td>
                                <td><span class="status-badge status-inactive">Inactivo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-warning" onclick="editService('003')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-success" onclick="toggleService('003')">
                                        <i class="fas fa-toggle-on"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Para llevar</strong></td>
                                <td>Pedidos para recoger en el local</td>
                                <td>Variable</td>
                                <td>15 min</td>
                                <td>Ilimitado</td>
                                <td><span class="status-badge status-active">Activo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-warning" onclick="editService('004')">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger" onclick="toggleService('004')">
                                        <i class="fas fa-toggle-off"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Customers Section -->
        <div id="customers-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Base de Clientes</h1>
                <div>
                    <input type="text" placeholder="Buscar cliente..." class="form-control" style="width: 200px; margin-right: 1rem;" id="customerSearch">
                    <button class="btn btn-primary" onclick="exportCustomers()">
                        <i class="fas fa-download"></i> Exportar
                    </button>
                </div>
            </div>

            <div class="grid-4 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">156</div>
                    <div class="stat-label">Clientes Totales</div>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">45</div>
                    <div class="stat-label">Nuevos Este Mes</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">89%</div>
                    <div class="stat-label">Satisfacción</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-number">23</div>
                    <div class="stat-label">Clientes VIP</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Lista de Clientes Frecuentes</h3>
                </div>
                <div class="table-container">
                    <table class="table" id="customersTable">
                        <thead>
                            <tr>
                                <th>Cliente</th>
                                <th>Email</th>
                                <th>Teléfono</th>
                                <th>Visitas</th>
                                <th>Última Visita</th>
                                <th>Gasto Total</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="customer-info">
                                        <div class="customer-avatar">MR</div>
                                        <div>
                                            <strong>María Rodríguez</strong>
                                            <small>Cliente desde 2023</small>
                                        </div>
                                    </div>
                                </td>
                                <td>maria.rodriguez@email.com</td>
                                <td>+593 99 123 4567</td>
                                <td>12</td>
                                <td>Hoy</td>
                                <td>$450.00</td>
                                <td><span class="status-badge status-active">VIP</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewCustomerDetails('001')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-success" onclick="sendPromotion('001')">
                                        <i class="fas fa-gift"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="customer-info">
                                        <div class="customer-avatar">JG</div>
                                        <div>
                                            <strong>Juan García</strong>
                                            <small>Cliente desde 2024</small>
                                        </div>
                                    </div>
                                </td>
                                <td>juan.garcia@email.com</td>
                                <td>+593 99 234 5678</td>
                                <td>8</td>
                                <td>Ayer</td>
                                <td>$280.00</td>
                                <td><span class="status-badge status-completed">Regular</span></td>
                                <td>
                                    <button class="btn btn-sm btn-primary" onclick="viewCustomerDetails('002')">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                    <button class="btn btn-sm btn-success" onclick="sendPromotion('002')">
                                        <i class="fas fa-gift"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Reports Section -->
        <div id="reports-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Reportes y Estadísticas</h1>
                <div>
                    <select class="form-control" style="width: 200px; margin-right: 1rem;">
                        <option>Última semana</option>
                        <option>Último mes</option>
                        <option>Último trimestre</option>
                        <option>Último año</option>
                    </select>
                    <button class="btn btn-primary" onclick="generateReport()">
                        <i class="fas fa-chart-bar"></i> Generar
                    </button>
                </div>
            </div>

            <div class="grid-4 mb-3">
                <div class="stat-card primary">
                    <div class="stat-number">$12,450</div>
                    <div class="stat-label">Ingresos del Mes</div>
                    <small><i class="fas fa-arrow-up"></i> +15% vs mes anterior</small>
                </div>
                <div class="stat-card success">
                    <div class="stat-number">234</div>
                    <div class="stat-label">Clientes Atendidos</div>
                    <small><i class="fas fa-arrow-up"></i> +8% vs mes anterior</small>
                </div>
                <div class="stat-card warning">
                    <div class="stat-number">4.6</div>
                    <div class="stat-label">Calificación Promedio</div>
                    <small><i class="fas fa-star"></i> De 5 estrellas</small>
                </div>
                <div class="stat-card danger">
                    <div class="stat-number">18</div>
                    <div class="stat-label">Tiempo Prom. Espera</div>
                    <small><i class="fas fa-clock"></i> Minutos</small>
                </div>
            </div>

            <div class="grid-2 mb-3">
                <div class="card">
                    <div class="card-header">
                        <h3>Ventas por Servicio</h3>
                    </div>
                    <div class="chart-container">
                        <div style="text-align: center; color: #666;">
                            <i class="fas fa-chart-pie" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <p>Gráfico de ventas por tipo de servicio</p>
                            <div style="text-align: left; margin-top: 1rem;">
                                <div style="margin-bottom: 0.5rem;">
                                    <span style="color: #667eea;">●</span> Mesa para 4: 45% ($5,602)
                                </div>
                                <div style="margin-bottom: 0.5rem;">
                                    <span style="color: #28a745;">●</span> Mesa para 2: 30% ($3,735)
                                </div>
                                <div style="margin-bottom: 0.5rem;">
                                    <span style="color: #ffc107;">●</span> Para llevar: 20% ($2,490)
                                </div>
                                <div>
                                    <span style="color: #dc3545;">●</span> Eventos: 5% ($623)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3>Horarios Más Ocupados</h3>
                    </div>
                    <div class="chart-container">
                        <div style="text-align: center; color: #666;">
                            <i class="fas fa-chart-bar" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                            <p>Distribución de citas por hora</p>
                            <div style="text-align: left; margin-top: 1rem;">
                                <div style="margin-bottom: 0.5rem;">12:00 - 14:00: 25 citas</div>
                                <div style="margin-bottom: 0.5rem;">19:00 - 21:00: 35 citas</div>
                                <div style="margin-bottom: 0.5rem;">21:00 - 22:00: 18 citas</div>
                                <div>Fin de semana: +40% más demanda</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h3>Resumen Financiero Mensual</h3>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Concepto</th>
                                <th>Este Mes</th>
                                <th>Mes Anterior</th>
                                <th>Variación</th>
                                <th>Meta</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Ingresos Totales</td>
                                <td>$12,450</td>
                                <td>$10,820</td>
                                <td><span style="color: green;">+15%</span></td>
                                <td>$15,000</td>
                            </tr>
                            <tr>
                                <td>Costos Operativos</td>
                                <td>$7,890</td>
                                <td>$7,650</td>
                                <td><span style="color: red;">+3%</span></td>
                                <td>$8,000</td>
                            </tr>
                            <tr>
                                <td>Ganancia Neta</td>
                                <td>$4,560</td>
                                <td>$3,170</td>
                                <td><span style="color: green;">+44%</span></td>
                                <td>$7,000</td>
                            </tr>
                            <tr>
                                <td>Margen de Ganancia</td>
                                <td>36.6%</td>
                                <td>29.3%</td>
                                <td><span style="color: green;">+7.3%</span></td>
                                <td>46.7%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Settings Section -->
        <div id="settings-section" class="content-section" style="display: none;">
            <div class="dashboard-header">
                <h1 class="dashboard-title">Configuración del Negocio</h1>
                <div>
                    <button class="btn btn-success" onclick="saveSettings()">
                        <i class="fas fa-save"></i> Guardar Cambios
                    </button>
                </div>
            </div>

            <div class="grid-2">
                <!-- Business Information -->
                <div class="card">
                    <div class="card-header">
                        <h3>Información del Negocio</h3>
                    </div>
                    <div style="padding: 1.5rem;">
                        <div class="form-group">
                            <label>Nombre del Negocio:</label>
                            <input type="text" class="form-control" value="Restaurante El Buen Sabor">
                        </div>
                        <div class="form-group">
                            <label>Descripción:</label>
                            <textarea class="form-control" rows="3">Restaurante familiar especializado en comida tradicional ecuatoriana con ambiente acogedor.</textarea>
                        </div>
                        <div class="form-group">
                            <label>Dirección:</label>
                            <input type="text" class="form-control" value="Av. Flavio Reyes 123, Manta">
                        </div>
                        <div class="form-group">
                            <label>Teléfono:</label>
                            <input type="tel" class="form-control" value="+593 5 262 1234">
                        </div>
                        <div class="form-group">
                            <label>Email:</label>
                            <input type="email" class="form-control" value="info@elbuensabor.com">
                        </div>
                    </div>
                </div>

                <!-- Operating Hours -->
                <div class="card">
                    <div class="card-header">
                        <h3>Horarios de Atención</h3>
                    </div>
                    <div style="padding: 1.5rem;">
                        <div class="form-group">
                            <label>Lunes a Viernes:</label>
                            <div class="d-flex" style="gap: 1rem;">
                                <input type="time" class="form-control" value="11:00">
                                <span style="align-self: center;">hasta</span>
                                <input type="time" class="form-control" value="22:00">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Sábados:</label>
                            <div class="d-flex" style="gap: 1rem;">
                                <input type="time" class="form-control" value="10:00">
                                <span style="align-self: center;">hasta</span>
                                <input type="time" class="form-control" value="23:00">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Domingos:</label>
                            <div class="d-flex" style="gap: 1rem;">
                                <input type="time" class="form-control" value="12:00">
                                <span style="align-self: center;">hasta</span>
                                <input type="time" class="form-control" value="21:00">
                            </div>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="holidays"> 
                            <label for="holidays">Cerrado en feriados</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid-2 mt-3">
                <!-- Capacity Settings -->
                <div class="card">
                    <div class="card-header">
                        <h3>Configuración de Capacidad</h3>
                    </div>
                    <div style="padding: 1.5rem;">
                        <div class="form-group">
                            <label>Mesas para 2 personas:</label>
                            <input type="number" class="form-control" value="4">
                        </div>
                        <div class="form-group">
                            <label>Mesas para 4 personas:</label>
                            <input type="number" class="form-control" value="6">
                        </div>
                        <div class="form-group">
                            <label>Mesas para 6 personas:</label>
                            <input type="number" class="form-control" value="2">
                        </div>
                        <div class="form-group">
                            <label>Tiempo promedio por servicio (min):</label>
                            <input type="number" class="form-control" value="90">
                        </div>
                        <div class="form-group">
                            <label>Tiempo de limpieza entre servicios (min):</label>
                            <input type="number" class="form-control" value="15">
                        </div>
                    </div>
                </div>

                <!-- Notification Settings -->
                <div class="card">
                    <div class="card-header">
                        <h3>Configuración de Notificaciones</h3>
                    </div>
                    <div style="padding: 1.5rem;">
                        <div class="form-group">
                            <input type="checkbox" id="emailNotifications" checked> 
                            <label for="emailNotifications">Notificaciones por email</label>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="smsNotifications" checked> 
                            <label for="smsNotifications">Notificaciones por SMS</label>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="reminderNotifications" checked> 
                            <label for="reminderNotifications">Recordatorios automáticos</label>
                        </div>
                        <div class="form-group">
                            <label>Tiempo de recordatorio (minutos antes):</label>
                            <input type="number" class="form-control" value="15">
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="autoConfirm"> 
                            <label for="autoConfirm">Confirmación automática de citas</label>
                        </div>
                        <div class="form-group">
                            <input type="checkbox" id="waitlistNotifications" checked> 
                            <label for="waitlistNotifications">Notificar cuando hay espacio disponible</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
        <!-- Dashboard Header -->
        <div class="dashboard-header">
            <h1 class="dashboard-title">Dashboard - Restaurante El Buen Sabor</h1>
            <div>
                <button class="btn btn-success" onclick="callNext()">
                    <i class="fas fa-phone"></i> Llamar Siguiente
                </button>
                <button class="btn btn-primary" onclick="refreshData()">
                    <i class="fas fa-sync-alt"></i> Actualizar
                </button>
            </div>
        </div>

        <!-- Quick Stats -->
        <div class="grid-4 mb-3">
            <div class="stat-card primary">
                <div class="stat-number">8</div>
                <div class="stat-label">En Fila Virtual</div>
                <small><i class="fas fa-clock"></i> Tiempo prom: 18 min</small>
            </div>
            <div class="stat-card success">
                <div class="stat-number">45</div>
                <div class="stat-label">Clientes Hoy</div>
                <small><i class="fas fa-arrow-up"></i> +12% vs ayer</small>
            </div>
            <div class="stat-card warning">
                <div class="stat-number">3</div>
                <div class="stat-label">Siendo Atendidos</div>
                <small><i class="fas fa-utensils"></i> 3 mesas ocupadas</small>
            </div>
            <div class="stat-card danger">
                <div class="stat-number">$890</div>
                <div class="stat-label">Ventas del Día</div>
                <small><i class="fas fa-dollar-sign"></i> Meta: $1,200</small>
            </div>
        </div>

        <!-- Current Queue and Quick Actions -->
        <div class="grid-2 mb-3">
            <!-- Virtual Queue -->
            <div class="card">
                <div class="card-header">
                    <h3>Fila Virtual Actual</h3>
                    <div>
                        <span class="status-badge status-active">En línea</span>
                        <button class="btn btn-sm btn-primary" onclick="showModal('addCustomerModal')">
                            <i class="fas fa-plus"></i> Agregar Cliente
                        </button>
                    </div>
                </div>
                <div class="queue-interface" style="max-height: 400px; overflow-y: auto;">
                    <div class="queue-item active">
                        <div class="customer-info">
                            <div class="customer-avatar">MR</div>
                            <div>
                                <strong>María Rodríguez</strong>
                                <div style="font-size: 0.9em; color: #666;">Mesa para 4 - 19:30</div>
                                <div style="font-size: 0.8em; color: #007bff;">Tel: +593 99 123 4567</div>
                            </div>
                        </div>
                        <div>
                            <span class="status-badge status-active">Siendo atendido</span>
                            <button class="btn btn-sm btn-success mt-1" onclick="completeService('001')">
                                <i class="fas fa-check"></i> Completar
                            </button>
                        </div>
                    </div>
                    <div class="queue-item waiting">
                        <div class="customer-info">
                            <div class="customer-avatar">JG</div>
                            <div>
                                <strong>Juan García</strong>
                                <div style="font-size: 0.9em; color: #666;">Mesa para 2 - 20:00</div>
                                <div style="font-size: 0.8em; color: #007bff;">Tel: +593 99 234 5678</div>
                            </div>
                        </div>
                        <div>
                            <span class="status-badge status-pending">En espera (8 min)</span>
                            <button class="btn btn-sm btn-primary mt-1" onclick="callCustomer('002')">
                                <i class="fas fa-phone"></i> Llamar
                            </button>
                        </div>
                    </div>
                    <div class="queue-item waiting">
                        <div class="customer-info">
                            <div class="customer-avatar">AS</div>
                            <div>
                                <strong>Ana Silva</strong>
                                <div style="font-size: 0.9em; color: #666;">Mesa para 6 - 20:15</div>
                                <div style="font-size: 0.8em; color: #007bff;">Tel: +593 99 345 6789</div>
                            </div>
                        </div>
                        <div>
                            <span class="status-badge status-pending">En espera (23 min)</span>
                            <button class="btn btn-sm btn-primary mt-1" onclick="callCustomer('003')">
                                <i class="fas fa-phone"></i> Llamar
                            </button>
                        </div>
                    </div>
                    <div class="queue-item">
                        <div class="customer-info">
                            <div class="customer-avatar">CL</div>
                            <div>
                                <strong>Carlos López</strong>
                                <div style="font-size: 0.9em; color: #666;">Mesa para 3 - 20:30</div>
                                <div style="font-size: 0.8em; color: #007bff;">Tel: +593 99 456 7890</div>
                            </div>
                        </div>
                        <div>
                            <span class="status-badge status-completed">Posición #4</span>
                            <button class="btn btn-sm btn-warning mt-1" onclick="cancelAppointment('004')">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick Actions & Info -->
            <div>
                <!-- Business Status -->
                <div class="card mb-2">
                    <div class="card-header">
                        <h3>Estado del Negocio</h3>
                        <button class="btn btn-sm btn-secondary" onclick="toggleBusinessStatus()">
                            <i class="fas fa-power-off"></i> <span id="statusToggle">Cerrar</span>
                        </button>
                    </div>
                    <div style="padding: 1rem;">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Estado:</span>
                            <span class="status-badge status-active" id="businessStatus">Abierto</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Horario:</span>
                            <span>11:00 AM - 10:00 PM</span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Capacidad:</span>
                            <span>12 mesas (75% ocupadas)</span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Personal activo:</span>
                            <span>8 empleados</span>
                        </div>
                    </div>
                </div>

                <!-- Services Summary -->
                <div class="card">
                    <div class="card-header">
                        <h3>Servicios Populares Hoy</h3>
                        <button class="btn btn-sm btn-primary" onclick="showModal('manageServicesModal')">
                            <i class="fas fa-cog"></i> Gestionar
                        </button>
                    </div>
                    <div style="padding: 1rem;">
                        <div class="d-flex justify-content-between mb-2">
                            <span>Mesa para 4</span>
                            <span><strong>18 reservas</strong></span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Mesa para 2</span>
                            <span><strong>15 reservas</strong></span>
                        </div>
                        <div class="d-flex justify-content-between mb-2">
                            <span>Para llevar</span>
                            <span><strong>12 pedidos</strong></span>
                        </div>
                        <div class="d-flex justify-content-between">
                            <span>Eventos</span>
                            <span><strong>2 eventos</strong></span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Today's Appointments -->
        <div class="card mb-3">
            <div class="card-header">
                <h3>Citas de Hoy</h3>
                <div>
                    <input type="date" class="form-control" style="width: 200px; margin-right: 1rem;" id="dateFilter" value="2024-09-30">
                    <button class="btn btn-primary" onclick="filterByDate()">
                        <i class="fas fa-filter"></i> Filtrar
                    </button>
                </div>
            </div>
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Hora</th>
                            <th>Cliente</th>
                            <th>Servicio</th>
                            <th>Teléfono</th>
                            <th>Estado</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>19:30</td>
                            <td>María Rodríguez</td>
                            <td>Mesa para 4</td>
                            <td>+593 99 123 4567</td>
                            <td><span class="status-badge status-active">En progreso</span></td>
                            <td>
                                <button class="btn btn-sm btn-success" onclick="completeService('001')">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="btn btn-sm btn-primary" onclick="viewCustomer('001')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>20:00</td>
                            <td>Juan García</td>
                            <td>Mesa para 2</td>
                            <td>+593 99 234 5678</td>
                            <td><span class="status-badge status-pending">Esperando</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="startService('002')">
                                    <i class="fas fa-play"></i>
                                </button>
                                <button class="btn btn-sm btn-warning" onclick="postponeService('002')">
                                    <i class="fas fa-clock"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>20:15</td>
                            <td>Ana Silva</td>
                            <td>Mesa para 6</td>
                            <td>+593 99 345 6789</td>
                            <td><span class="status-badge status-pending">Esperando</span></td>
                            <td>
                                <button class="btn btn-sm btn-primary" onclick="startService('003')">
                                    <i class="fas fa-play"></i>
                                </button>
                                <button class="btn btn-sm btn-warning" onclick="postponeService('003')">
                                    <i class="fas fa-clock"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>18:30</td>
                            <td>Pedro Ramírez</td>
                            <td>Para llevar</td>
                            <td>+593 99 567 8901</td>
                            <td><span class="status-badge status-completed">Completado</span></td>
                            <td>
                                <button class="btn btn-sm btn-secondary" disabled>
                                    <i class="fas fa-check"></i>
                                </button>
                                <button class="btn btn-sm btn-primary" onclick="viewCustomer('004')">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Performance Chart -->
        <div class="card">
            <div class="card-header">
                <h3>Rendimiento Semanal</h3>
                <select class="form-control" style="width: auto;">
                    <option>Esta semana</option>
                    <option>Semana pasada</option>
                    <option>Últimas 4 semanas</option>
                </select>
            </div>
            <div class="chart-container">
                <div style="text-align: center; color: #666;">
                    <i class="fas fa-chart-bar" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                    <p>Gráfico de rendimiento semanal</p>
                    <p><small>Mostrando: Clientes atendidos, Tiempo promedio de espera, Satisfacción</small></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Add Customer Modal -->
    <div id="addCustomerModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addCustomerModal')">&times;</span>
            <h2>Agregar Cliente a la Fila</h2>
            <form style="margin-top: 2rem;" onsubmit="addCustomerToQueue(event)">
                <div class="form-group">
                    <label for="customerName">Nombre del Cliente:</label>
                    <input type="text" id="customerName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="customerPhone">Teléfono:</label>
                    <input type="tel" id="customerPhone" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="serviceType">Tipo de Servicio:</label>
                    <select id="serviceType" class="form-control" required>
                        <option value="">Seleccionar servicio</option>
                        <option value="mesa2">Mesa para 2</option>
                        <option value="mesa4">Mesa para 4</option>
                        <option value="mesa6">Mesa para 6</option>
                        <option value="takeaway">Para llevar</option>
                        <option value="delivery">Delivery</option>
                        <option value="evento">Evento especial</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="preferredTime">Hora Preferida:</label>
                    <input type="time" id="preferredTime" class="form-control">
                </div>
                <div class="form-group">
                    <label for="specialNotes">Notas Especiales:</label>
                    <textarea id="specialNotes" class="form-control" rows="3" placeholder="Alergias, preferencias especiales, etc."></textarea>
                </div>
                <button type="submit" class="btn btn-primary w-100">Agregar a la Fila</button>
            </form>
        </div>
    </div>

    <!-- Manage Services Modal -->
    <div id="manageServicesModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('manageServicesModal')">&times;</span>
            <h2>Gestionar Servicios</h2>
            <div style="margin-top: 2rem;">
                <div class="d-flex justify-content-between mb-3">
                    <h4>Servicios Actuales</h4>
                    <button class="btn btn-primary" onclick="showAddServiceForm()">
                        <i class="fas fa-plus"></i> Agregar Servicio
                    </button>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Servicio</th>
                                <th>Precio</th>
                                <th>Tiempo Estimado</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Mesa para 2</td>
                                <td>$25.00</td>
                                <td>90 min</td>
                                <td><span class="status-badge status-active">Activo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-warning">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger">
                                        <i class="fas fa-toggle-off"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>Mesa para 4</td>
                                <td>$45.00</td>
                                <td>120 min</td>
                                <td><span class="status-badge status-active">Activo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-warning">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger">
                                        <i class="fas fa-toggle-off"></i>
                                    </button>
                                </td>
                            </tr>
                            <tr>
                                <td>Para llevar</td>
                                <td>Variable</td>
                                <td>15 min</td>
                                <td><span class="status-badge status-active">Activo</span></td>
                                <td>
                                    <button class="btn btn-sm btn-warning">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-danger">
                                        <i class="fas fa-toggle-off"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="js/script.js"></script>
    <script>
        // Admin Local specific functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Show selected section
            document.getElementById(sectionName + '-section').style.display = 'block';
            
            // Update active nav link
            document.querySelectorAll('.sidebar-nav a').forEach(link => {
                link.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function callNext() {
            showNotification('Llamando al siguiente cliente...', 'info');
        }

        function callCustomer(customerId) {
            showNotification(`Llamando a cliente #${customerId}`, 'info');
        }

        function completeService(customerId) {
            if(confirm('¿Marcar este servicio como completado?')) {
                showNotification(`Servicio completado para cliente #${customerId}`, 'success');
            }
        }

        function startService(customerId) {
            showNotification(`Iniciando servicio para cliente #${customerId}`, 'success');
        }

        function postponeService(customerId) {
            const newTime = prompt('Nueva hora (HH:MM):');
            if(newTime) {
                showNotification(`Cita reprogramada para ${newTime}`, 'warning');
            }
        }

        function cancelAppointment(customerId) {
            if(confirm('¿Cancelar esta cita?')) {
                showNotification(`Cita cancelada para cliente #${customerId}`, 'warning');
            }
        }

        function addCustomerToQueue(event) {
            event.preventDefault();
            showNotification('Cliente agregado a la fila virtual', 'success');
            closeModal('addCustomerModal');
        }

        function toggleBusinessStatus() {
            const status = document.getElementById('businessStatus');
            const toggle = document.getElementById('statusToggle');
            
            if(status.textContent === 'Abierto') {
                status.textContent = 'Cerrado';
                status.className = 'status-badge status-inactive';
                toggle.textContent = 'Abrir';
                showNotification('Negocio cerrado', 'warning');
            } else {
                status.textContent = 'Abierto';
                status.className = 'status-badge status-active';
                toggle.textContent = 'Cerrar';
                showNotification('Negocio abierto', 'success');
            }
        }

        function filterByDate() {
            const date = document.getElementById('dateFilter').value;
            showNotification(`Filtrando citas para ${date}`, 'info');
        }

        function viewCustomer(customerId) {
            alert(`Viendo detalles del cliente #${customerId}`);
        }

        function refreshQueue() {
            showNotification('Fila virtual actualizada', 'info');
        }

        function pauseService(customerId) {
            showNotification(`Servicio pausado para cliente #${customerId}`, 'warning');
        }

        function editService(serviceId) {
            showNotification(`Editando servicio #${serviceId}`, 'info');
        }

        function toggleService(serviceId) {
            showNotification(`Estado del servicio #${serviceId} cambiado`, 'info');
        }

        function viewCustomerDetails(customerId) {
            alert(`Mostrando historial completo del cliente #${customerId}`);
        }

        function sendPromotion(customerId) {
            showNotification(`Promoción enviada al cliente #${customerId}`, 'success');
        }

        function exportCustomers() {
            showNotification('Exportando lista de clientes...', 'info');
        }

        function generateReport() {
            showNotification('Generando reporte...', 'info');
        }

        function saveSettings() {
            showNotification('Configuración guardada exitosamente', 'success');
        }

        // Update queue times every minute
        setInterval(() => {
            const waitingBadges = document.querySelectorAll('.status-pending');
            waitingBadges.forEach(badge => {
                if (badge.textContent.includes('min')) {
                    const match = badge.textContent.match(/(\d+) min/);
                    if (match) {
                        const currentTime = parseInt(match[1]);
                        if (currentTime > 0) {
                            badge.textContent = badge.textContent.replace(/\d+ min/, `${currentTime + 1} min`);
                        }
                    }
                }
            });
        }, 60000); // Update every minute

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Show dashboard by default
            showSection('dashboard');
        });
    </script>
</body>
</html>