â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          CÃ“MO PROBAR QUE EL SISTEMA FUNCIONA CORRECTAMENTE      â•‘
â•‘              (PatrÃ³n Idempotent Consumer)                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ Â¿QUÃ‰ ESTAMOS PROBANDO?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El sistema implementa el patrÃ³n "Idempotent Consumer" que garantiza:

âœ… NO hay duplicados en transacciones financieras
âœ… Si envÃ­as la misma solicitud 2, 3, 10 veces â†’ Solo se procesa 1 vez
âœ… El dinero se debita UNA SOLA VEZ (no 2, 3, 10 veces)
âœ… El sistema es seguro para reintentos automÃ¡ticos


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª PRUEBA 1: Test Automatizado (RECOMENDADO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Archivo: test_idempotencia.ps1

CÃ“MO EJECUTAR:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. AsegÃºrate de que Docker estÃ© corriendo:
   $ docker ps
   # Debes ver 7 contenedores UP

2. Ejecuta el test:
   $ .\test_idempotencia.ps1

3. Observa el resultado

QUÃ‰ HACE EL TEST:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

PASO 1: Primera Solicitud
- EnvÃ­a una transferencia: Cuenta 1 â†’ Cuenta 3, Monto: $150
- Sistema crea: ID=1, Transaction=TXN_xxxx, Idempotency Key=abc123

PASO 2: Segunda Solicitud (IDÃ‰NTICA)
- EnvÃ­a EXACTAMENTE la misma solicitud
- Sistema responde: ID=1 (Â¡MISMO ID!)
- Transaction=TXN_xxxx (Â¡MISMO!)
- Idempotency Key=abc123 (Â¡MISMO!)

PASO 3: VerificaciÃ³n en Base de Datos
- Consulta: Â¿CuÃ¡ntas transferencias con Key abc123?
- Resultado: 1 (Â¡SOLO UNA!)

RESULTADO ESPERADO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… IDs en BD IGUALES: 1 = 1
âœ… Claves de idempotencia IGUALES
âœ… IDs de transacciÃ³n IGUALES
âœ… Cantidad de registros: 1 (NO 2)
âœ… IDEMPOTENCIA FUNCIONANDO CORRECTAMENTE

INTERPRETACIÃ“N:
El sistema acepta la segunda solicitud SIN error, pero NO crea un 
registro duplicado. Esto es EXACTAMENTE lo que queremos:
- Cliente puede reintentar sin miedo
- Dinero se debita UNA SOLA VEZ
- No hay duplicados en la base de datos


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª PRUEBA 2: Test Manual con Postman
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PREPARACIÃ“N:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Abre Postman
2. Importa: Postman_Collection_Idempotent_Consumer.json
3. AsegÃºrate de que Docker estÃ© activo

PASOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Obtener cuentas existentes:
   GET http://localhost:3001/cuentas
   
   Respuesta: Lista de cuentas con sus IDs
   Anota: ID de Cuenta Origen (ej: 1) y ID de Cuenta Destino (ej: 3)

2. Crear primera transferencia:
   POST http://localhost:3002/transferencias
   Body:
   {
     "cuentaOrigenId": 1,
     "cuentaDestinoId": 3,
     "monto": 100.00
   }
   
   Respuesta:
   {
     "id": 5,
     "transferenciaId": "TXN_20251215_ABC123",
     "estado": "PENDIENTE",
     "idempotencyKey": "xyz789..."
   }
   
   âš ï¸ ANOTA: El "id" (5) y el "transferenciaId"

3. Crear transferencia DUPLICADA (misma solicitud):
   POST http://localhost:3002/transferencias
   Body:
   {
     "cuentaOrigenId": 1,    â† MISMO
     "cuentaDestinoId": 3,   â† MISMO
     "monto": 100.00         â† MISMO
   }
   
   Respuesta:
   {
     "id": 5,                                â† Â¡MISMO ID!
     "transferenciaId": "TXN_20251215_ABC123", â† Â¡MISMO!
     "estado": "PENDIENTE",
     "idempotencyKey": "xyz789..."           â† Â¡MISMO!
   }

4. Verificar en base de datos:
   GET http://localhost:3002/transferencias
   
   Busca el ID 5 en la lista
   Resultado: SOLO aparece UNA VEZ (no 2 veces)

RESULTADO ESPERADO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

âœ… Ambas solicitudes devuelven el MISMO ID
âœ… Ambas solicitudes devuelven el MISMO Transaction ID
âœ… En la BD solo hay 1 registro (no 2)
âœ… El dinero se debitÃ³ UNA SOLA VEZ

SEÃ‘ALES DE QUE FUNCIONA CORRECTAMENTE:
âœ“ No hay error 400/500 en la segunda solicitud
âœ“ La respuesta es idÃ©ntica en ambas solicitudes
âœ“ Al consultar transferencias, solo aparece 1 registro


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª PRUEBA 3: Verificar en Redis Cache
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

El sistema usa Redis como cachÃ© de 7 dÃ­as para idempotencia.

PASOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Ejecuta una transferencia (Postman o PowerShell)
2. Anota el "idempotencyKey" de la respuesta
3. Verifica en Redis:

   $ docker exec -it redis-cache redis-cli
   > GET idempotency:<tu_idempotency_key>
   
   Resultado: "1" (significa: procesado)
   
   > TTL idempotency:<tu_idempotency_key>
   
   Resultado: 604800 (7 dÃ­as en segundos)

4. Intenta crear duplicado
5. Verifica que Redis devuelve el mismo valor

INTERPRETACIÃ“N:
Redis guarda la clave por 7 dÃ­as para evitar duplicados durante
ese periodo. DespuÃ©s de 7 dÃ­as, PostgreSQL toma el relevo.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§ª PRUEBA 4: Verificar en PostgreSQL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DespuÃ©s de 7 dÃ­as, Redis borra la clave pero PostgreSQL la mantiene
permanentemente.

PASOS:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Conectar a PostgreSQL Worker:
   Host: localhost
   Port: 5434
   User: postgres
   Password: postgres123
   Database: transferencias_db

2. Ejecutar consulta:
   
   SELECT * FROM transferencias
   WHERE idempotency_key = '<tu_key>'
   ORDER BY fecha_creacion DESC;

3. Verificar resultado:
   - Solo debe haber 1 registro
   - La fecha_creacion debe ser la misma que la primera solicitud
   - El estado debe ser el esperado (PENDIENTE, COMPLETADA, etc.)

INTERPRETACIÃ“N:
PostgreSQL mantiene el registro para siempre, garantizando que
incluso despuÃ©s de 7 dÃ­as (cuando Redis expira), no hay duplicados.


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š TABLA DE RESULTADOS ESPERADOS VS NO ESPERADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESCENARIO                  â”‚ RESULTADO ESPERADO                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Primera solicitud          â”‚ Crea nuevo registro, ID=N         â”‚
â”‚ Segunda solicitud (igual)  â”‚ Devuelve MISMO ID=N (no crea)     â”‚
â”‚ Cantidad en BD             â”‚ 1 registro                        â”‚
â”‚ Dinero debitado            â”‚ UNA SOLA VEZ                      â”‚
â”‚ Redis cache                â”‚ Contiene la clave (7 dÃ­as)        â”‚
â”‚ PostgreSQL                 â”‚ Contiene el registro (permanente) â”‚
â”‚ Error en segunda solicitud â”‚ NO (200 OK)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ESCENARIO FALLIDO         â”‚ SEÃ‘AL DE PROBLEMA                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Segunda solicitud          â”‚ Crea NUEVO ID (ID=N+1)            â”‚
â”‚ Cantidad en BD             â”‚ 2 o mÃ¡s registros                 â”‚
â”‚ Dinero debitado            â”‚ DOS o mÃ¡s veces                   â”‚
â”‚ Error 500                  â”‚ Sistema no maneja idempotencia    â”‚
â”‚ IDs diferentes             â”‚ No estÃ¡ usando cache              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ EXPLICACIÃ“N PARA LA PRESENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

HISTORIA DEL PROBLEMA:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

"Imagina que transfieres $1000 a un amigo. Haces click en 'Enviar'.
La red falla. Tu app reintenta automÃ¡ticamente. Sin idempotencia,
tu amigo recibe $2000. Â¡PROBLEMA!"

SOLUCIÃ“N (Idempotent Consumer):
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Primera solicitud:
   - Sistema genera ID Ãºnico (idempotency key)
   - Guarda en Redis + PostgreSQL
   - Procesa transferencia
   - Debita $1000

2. Segunda solicitud (reintento):
   - Sistema ve: "Ya procesÃ© esta clave"
   - Devuelve MISMO resultado
   - NO procesa nuevamente
   - NO debita mÃ¡s dinero

3. Resultado:
   - Tu amigo recibe $1000 (correcto)
   - No hay duplicados
   - Sistema es seguro para reintentos

DEMOSTRACIÃ“N EN VIVO:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Ejecuta: .\test_idempotencia.ps1
2. Muestra salida en pantalla:
   - Primera solicitud: ID=1
   - Segunda solicitud: ID=1 (Â¡MISMO!)
   - Cantidad en BD: 1 (Â¡NO 2!)
3. ConclusiÃ³n: "Dinero debitado UNA SOLA VEZ"


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… CHECKLIST DE VERIFICACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Antes de la presentaciÃ³n, verifica:

â–¡ Docker estÃ¡ activo (7 servicios UP)
â–¡ Test automatizado pasa (.\test_idempotencia.ps1)
â–¡ Postman tiene la colecciÃ³n importada
â–¡ Puedes acceder a http://localhost:3000, 3001, 3002
â–¡ Puedes acceder a RabbitMQ: http://localhost:15672
â–¡ Redis funciona: docker exec redis-cache redis-cli PING
â–¡ PostgreSQL responde: psql -h localhost -p 5434 -U postgres

Para demostraciÃ³n en vivo:
â–¡ Tienes el test listo para ejecutar
â–¡ Sabes explicar el resultado esperado
â–¡ Puedes mostrar en BD que solo hay 1 registro
â–¡ Entiendes por quÃ© "mismo ID" = idempotencia funciona


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ RESUMEN EJECUTIVO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Â¿QuÃ© probamos?
  Que el sistema NO crea transacciones duplicadas

Â¿CÃ³mo lo probamos?
  Enviando la misma solicitud 2 veces y verificando que:
  1. Devuelve el MISMO ID
  2. Solo hay 1 registro en BD
  3. Dinero debitado UNA SOLA VEZ

Â¿QuÃ© herramientas usamos?
  - test_idempotencia.ps1 (automatizado)
  - Postman (manual)
  - Redis CLI (cache)
  - PostgreSQL (persistencia)

Â¿Resultado esperado?
  âœ… Sistema acepta reintentos SIN duplicar
  âœ… Dinero seguro
  âœ… Idempotencia funciona correctamente


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FIN - GUÃA DE PRUEBAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
